(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["params"],{"6b73":function(t,e,a){"use strict";var r=a("800a"),i=a.n(r);i.a},7139:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品分类")])],1),a("el-cascader",{attrs:{options:t.categires,props:t.props,"show-all-levels":!1},on:{change:t.categoryChange},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}}),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"dynamic"}},[a("div",[a("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.dialogVisible4AddDynamicParams=!0}}},[t._v("添加动态参数")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dynamicLoading,expression:"dynamicLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.dynamicParams}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,function(r,i){return a("el-tag",{key:i,attrs:{closable:""},on:{close:function(a){t.deleteDynamicAttr(i,e.row)}}},[t._v("\n                "+t._s(r)+"\n              ")])}),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{placeholder:"请输入按回车添加",size:"small"},on:{blur:function(a){t.clearInputValue(e.row)}},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){t.showInput(e.row)}}},[t._v("+ 添加值")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"参数名称",width:"500"}}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{attrs:{icon:"el-icon-edit",size:"small",type:"primary",plain:""},on:{click:function(a){t.updateDynamicParams(e.row)}}}),a("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger",plain:""},on:{click:function(a){t.deleteDynamicParams(e.row.attr_id)}}})],1)]}}])})],1)],1)]),a("el-tab-pane",{attrs:{label:"静态属性",name:"static"}},[a("div",[a("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.dialogVisible4AddStaticProperty=!0}}},[t._v("添加静态属性")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.staticLoading,expression:"staticLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.staticProperties}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"属性名称",width:"250"}}),a("el-table-column",{attrs:{prop:"attr_vals",label:"属性值",width:"350"}}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{attrs:{icon:"el-icon-edit",size:"small",type:"primary",plain:""},on:{click:function(a){t.updateStaticProperty(e.row.attr_id)}}}),a("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger",plain:""},on:{click:function(a){t.deleteStaticProperty(e.row.attr_id)}}})],1)]}}])})],1)],1)])],1),a("el-dialog",{attrs:{title:"添加动态参数",visible:t.dialogVisible4AddDynamicParams,width:"50%"},on:{"update:visible":function(e){t.dialogVisible4AddDynamicParams=e}}},[a("el-form",{ref:"addDynamicParamsForm",attrs:{model:t.dynamicParamsObj,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"参数名称",prop:"attr_name"}},[a("el-input",{model:{value:t.dynamicParamsObj.attr_name,callback:function(e){t.$set(t.dynamicParamsObj,"attr_name",e)},expression:"dynamicParamsObj.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible4AddDynamicParams=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAddDynamicParams}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改动态参数",visible:t.dialogVisible4EditDynamicParams,width:"50%"},on:{"update:visible":function(e){t.dialogVisible4EditDynamicParams=e}}},[a("el-form",{ref:"editDynamicParamsForm",attrs:{model:t.dynamicParamsObj,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"参数名称",prop:"attr_name"}},[a("el-input",{model:{value:t.dynamicParamsObj.attr_name,callback:function(e){t.$set(t.dynamicParamsObj,"attr_name",e)},expression:"dynamicParamsObj.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible4EditDynamicParams=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitEditDynamicParams}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加属性",visible:t.dialogVisible4AddStaticProperty,width:"50%"},on:{"update:visible":function(e){t.dialogVisible4AddStaticProperty=e}}},[a("el-form",{ref:"addStaticPropertyRef",attrs:{model:t.staticPropertyObj,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"属性名称",prop:"attr_name"}},[a("el-input",{model:{value:t.staticPropertyObj.attr_name,callback:function(e){t.$set(t.staticPropertyObj,"attr_name",e)},expression:"staticPropertyObj.attr_name"}})],1),a("el-form-item",{attrs:{label:"属性值",prop:"attr_vals"}},[a("el-input",{model:{value:t.staticPropertyObj.attr_vals,callback:function(e){t.$set(t.staticPropertyObj,"attr_vals",e)},expression:"staticPropertyObj.attr_vals"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible4AddStaticProperty=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAddStaticProperty}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改属性",visible:t.dialogVisible4EditStaticProperty,width:"50%"},on:{"update:visible":function(e){t.dialogVisible4EditStaticProperty=e}}},[a("el-form",{ref:"editStaticPropertyRef",attrs:{model:t.staticPropertyObj,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"属性名称",prop:"attr_name"}},[a("el-input",{model:{value:t.staticPropertyObj.attr_name,callback:function(e){t.$set(t.staticPropertyObj,"attr_name",e)},expression:"staticPropertyObj.attr_name"}})],1),a("el-form-item",{attrs:{label:"属性值",prop:"attr_vals"}},[a("el-input",{model:{value:t.staticPropertyObj.attr_vals,callback:function(e){t.$set(t.staticPropertyObj,"attr_vals",e)},expression:"staticPropertyObj.attr_vals"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible4EditStaticProperty=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitEditStaticProperty}},[t._v("确 定")])],1)],1)],1)},i=[],n=(a("7f7f"),a("28a5"),a("ac6a"),a("96cf"),a("1da1"));function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c={data:function(){return s({rules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}],attr_vals:[{required:!0,message:"请输入参数值",trigger:"blur"}]},categires:[],props:{label:"cat_name",value:"cat_id"},cat_id:"",selectedOptions:[],activeName:"dynamic",dynamicParams:[],dynamicLoading:!1,staticProperties:[],staticLoading:!1,type:"",dialogVisible4AddDynamicParams:!1,dialogVisible4EditDynamicParams:!1,dynamicParamsObj:{attr_id:"",attr_name:""},dialogVisible4AddStaticProperty:!1,dialogVisible4EditStaticProperty:!1,staticPropertyObj:{attr_name:"",attr_vals:""}},"type","dynamic")},created:function(){this.getCategoriesData()},methods:{getCategoriesData:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("categories",{params:{type:3}});case 2:e=t.sent,this.categires=e.data.data,this.selectedOptions=[this.categires[0].cat_id,this.categires[0].children[0].cat_id,this.categires[0].children[0].children[0].cat_id],this.cat_id=this.categires[0].children[0].children[0].cat_id,this.getThreeLevelDynamicParams();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getThreeLevelDynamicParams:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.dynamicLoading=!0,t.next=3,this.$axios.get("categories/".concat(this.cat_id,"/attributes"),{params:{sel:"many"}});case 3:e=t.sent,this.dynamicLoading=!1,e.data.data.forEach(function(t){0===t.attr_vals.trim().length?t.attr_vals=[]:t.attr_vals=t.attr_vals.split(","),t.inputVisible=!1,t.inputValue=""}),this.dynamicParams=e.data.data;case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getThreeLevelStaticProperties:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.staticLoading=!0,t.next=3,this.$axios.get("categories/".concat(this.cat_id,"/attributes"),{params:{sel:"only"}});case 3:e=t.sent,this.staticLoading=!1,this.staticProperties=e.data.data;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),tabClick:function(t){switch(this.type=t.name,t.name){case"dynamic":this.getThreeLevelDynamicParams();break;case"static":this.getThreeLevelStaticProperties();break}},categoryChange:function(t){if(t.length<3)this.$message.error("请选择三级分类查询哦~");else switch(this.cat_id=t[2],this.type){case"dynamic":this.getThreeLevelDynamicParams();break;case"static":this.getThreeLevelStaticProperties();break}},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick(function(){e.$refs.saveTagInput.focus()})},clearInputValue:function(t){t.inputValue="",t.inputVisible=!1},handleInputConfirm:function(t){0!==t.inputValue.trim().length?(t.inputVisible=!1,t.attr_vals.push(t.inputValue),this.updateDynamicParam(t),t.inputValue=""):this.$message({type:"warning",message:"请输入内容哦~"})},deleteDynamicAttr:function(t,e){e.attr_vals.splice(t,1),this.updateDynamicParam(e)},updateDynamicParam:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="categories/".concat(this.cat_id,"/attributes/").concat(e.attr_id),t.next=3,this.$axios.put(a,{attr_sel:"many",attr_name:e.attr_name,attr_vals:e.attr_vals.join(",")});case 3:r=t.sent,200===r.data.meta.status&&this.$message({type:"success",message:r.data.meta.msg});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),submitAddDynamicParams:function(){var t=this;this.$refs.addDynamicParamsForm.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,t.$axios.post("categories/".concat(t.cat_id,"/attributes"),{attr_name:t.dynamicParamsObj.attr_name,attr_sel:"many"});case 3:r=e.sent,201===r.data.meta.status&&(t.dialogVisible4AddDynamicParams=!1,t.getThreeLevelDynamicParams(),t.$message({type:"success",message:r.data.meta.msg}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},updateDynamicParams:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.dynamicParamsObj.attr_id=e.attr_id,t.next=3,this.$axios.get("categories/".concat(this.cat_id,"/attributes/").concat(e.attr_id),{params:{attr_sel:"many"}});case 3:a=t.sent,this.dynamicParamsObj.attr_name=a.data.data.attr_name,this.dialogVisible4EditDynamicParams=!0;case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),submitEditDynamicParams:function(){var t=this;this.$refs.editDynamicParamsForm.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,t.$axios.put("categories/".concat(t.cat_id,"/attributes/").concat(t.dynamicParamsObj.attr_id),{attr_name:t.dynamicParamsObj.attr_name,attr_sel:"many"});case 3:r=e.sent,200===r.data.meta.status&&(t.dialogVisible4EditDynamicParams=!1,t.getThreeLevelDynamicParams(),t.$message({type:"success",message:r.data.meta.msg}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},deleteDynamicParams:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.delete("categories/".concat(this.cat_id,"/attributes/").concat(e));case 2:a=t.sent,200===a.data.meta.status&&(this.getThreeLevelDynamicParams(),this.$message({type:"success",message:a.data.meta.msg}));case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),submitAddStaticProperty:function(){var t=this;this.$refs.addStaticPropertyRef.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("categories/".concat(t.cat_id,"/attributes"),{attr_sel:"only",attr_name:t.staticPropertyObj.attr_name,attr_vals:t.staticPropertyObj.attr_vals});case 2:r=e.sent,201===r.data.meta.status&&(t.dialogVisible4AddStaticProperty=!1,t.getThreeLevelStaticProperties(),t.$message({type:"success",message:r.data.meta.msg}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},updateStaticProperty:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.staticPropertyObj.attr_id=e,t.next=3,this.$axios.get("categories/".concat(this.cat_id,"/attributes/").concat(e));case 3:a=t.sent,this.staticPropertyObj=a.data.data,this.dialogVisible4EditStaticProperty=!0;case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),submitEditStaticProperty:function(){var t=this;this.$refs.editStaticPropertyRef.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,t.$axios.put("categories/".concat(t.cat_id,"/attributes/").concat(t.staticPropertyObj.attr_id),{attr_sel:"only",attr_name:t.staticPropertyObj.attr_name,attr_vals:t.staticPropertyObj.attr_vals});case 3:r=e.sent,200===r.data.meta.status&&(t.dialogVisible4EditStaticProperty=!1,t.getThreeLevelStaticProperties(),t.$message({type:"success",message:r.data.meta.msg}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},deleteStaticProperty:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.delete("categories/".concat(this.cat_id,"/attributes/").concat(e));case 2:a=t.sent,200===a.data.meta.status&&(this.getThreeLevelStaticProperties(),this.$message({type:"success",message:a.data.meta.msg}));case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},o=c,l=(a("6b73"),a("2877")),u=Object(l["a"])(o,r,i,!1,null,"f71b5b2c",null);u.options.__file="params.vue";e["default"]=u.exports},"800a":function(t,e,a){}}]);